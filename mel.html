<!doctype html>
<html>
	<head>
		<title>
			Mel
		</title>
		<style type="text/css">
			html, body {
				margin: 0 auto;
				padding: 0 auto;
				overflow: hidden;
			}
		</style>
	</head>
	<body>
		<canvas id="canvas"></canvas>
		<img src="mel.jpg" style="display: none;" id="mel"/>
		<script type="text/javascript">
			var canvas = document.getElementById("canvas");
			canvas.width = window.innerWidth;
			canvas.height = window.innerHeight;
			var c = canvas.getContext("2d");

			var img = document.getElementById("mel");
			img.crossOrigin = "Anonymous";

			img.onload = function() {
					function loop () {
					c.drawImage(img, 0, 0);
					c.drawImage(img, 0, 246);
					c.drawImage(img, 0, 246 * 2);
					var imgData = c.getImageData(0, 0, 246, 246);	
					var newData = [];
					for (i = 0; i < imgData.data.length; i+=4) {
						imgData.data[i] += 10;
					}
					c.putImageData(imgData, 246, 0);
					for (i = 0; i < imgData.data.length; i+=4) {
						imgData.data[i] += 20;
					}
					c.putImageData(imgData, 246 * 2, 0);
					for (i = 0; i < imgData.data.length; i+=4) {
						imgData.data[i] += 40;
					}
					c.putImageData(imgData, 246 * 3, 0);
					for (i = 0; i < imgData.data.length; i+=4) {
						imgData.data[i] += 60;
					}
					c.putImageData(imgData, 246 * 4, 0);
					for (i = 0; i < imgData.data.length; i+=4) {
						imgData.data[i] += 80;
					}
					c.putImageData(imgData, 246 * 5, 0);
					for (i = 0; i < imgData.data.length; i+=4) {
						imgData.data[i] -= (10 + 240 + 40 + 60 + 80);
					}
				
					for (i = 0; i < imgData.data.length; i+=4) {
						imgData.data[i + 1] += 10;
					}
					c.putImageData(imgData, 246, 246);
					for (i = 0; i < imgData.data.length; i+=4) {
						imgData.data[i + 1] += 20;
					}
					c.putImageData(imgData, 246 * 2, 246);
					for (i = 0; i < imgData.data.length; i+=4) {
						imgData.data[i + 1] += 40;
					}
					c.putImageData(imgData, 246 * 3, 246);
					for (i = 0; i < imgData.data.length; i+=4) {
						imgData.data[i + 1] += 60;
					}
					c.putImageData(imgData, 246 * 4, 246);
					for (i = 0; i < imgData.data.length; i+=4) {
						imgData.data[i + 1] += 80;
					}
					c.putImageData(imgData, 246 * 5, 246);
					for (i = 0; i < imgData.data.length; i+=4) {
						imgData.data[i + 1] -= (10 + 240 + 40 + 60 + 80);
					}
					// end green
					for (i = 0; i < imgData.data.length; i+=4) {
						imgData.data[i + 2] += 10;
					}
					c.putImageData(imgData, 246, 246 * 2);
					for (i = 0; i < imgData.data.length; i+=4) {
						imgData.data[i + 2] += 20;
					}
					c.putImageData(imgData, 246 * 2, 246 * 2);
					for (i = 0; i < imgData.data.length; i+=4) {
						imgData.data[i + 2] += 40;
					}
					c.putImageData(imgData, 246 * 3, 246 * 2);
					for (i = 0; i < imgData.data.length; i+=4) {
						imgData.data[i + 2] += 60;
					}
					c.putImageData(imgData, 246 * 4, 246 * 2);
					for (i = 0; i < imgData.data.length; i+=4) {
						imgData.data[i + 2] += 80;
					}
					c.putImageData(imgData, 246 * 5, 246 * 2);
				
					requestAnimationFrame(loop);
				}
				loop();
			}

		</script>
	</body>
</html>